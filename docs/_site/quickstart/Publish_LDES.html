<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Publish an LDES | Technical Documentation</title> <meta name="generator" content="Jekyll v3.9.3" /> <meta property="og:title" content="Publish an LDES" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Publish an LDES" /> <meta property="og:description" content="Publish an LDES" /> <link rel="canonical" href="http://localhost:4000/quickstart/Publish_LDES" /> <meta property="og:url" content="http://localhost:4000/quickstart/Publish_LDES" /> <meta property="og:site_name" content="Technical Documentation" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2024-01-24T15:55:29+01:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Publish an LDES" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-01-24T15:55:29+01:00","datePublished":"2024-01-24T15:55:29+01:00","description":"Publish an LDES","headline":"Publish an LDES","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/quickstart/Publish_LDES"},"url":"http://localhost:4000/quickstart/Publish_LDES"}</script> <!-- End Jekyll SEO tag --> <div class="test-header" data-v-df634f57="" data-v-7a7a37b1=""> <div class="global-header" data-v-df634f57=""><img src="/assets/images/LOGO_Vlaanderen_NIV2.svg" alt="Vlaanderen" data-v-df634f57=""><img class="small-global-header-divider" src="/assets/images/divider_globalheader.svg" alt="divider" data-v-df634f57=""><span class="header-title header-font" data-v-df634f57="">Vlaamse Smart Data Space</span><span class="spacer" data-v-df634f57=""></span> <div id="help-needed" data-v-df634f57=""><span class="header-font" data-v-df634f57="">Hulp nodig</span><a id="help" href="https://www.vlaanderen.be/vlaamse-smart-data-space-portaal/contact"><img class="question-menu-item" src="/assets/images/question-mark.svg" alt="?" data-v-df634f57=""></a></div> </div> <hr class="divider" data-v-df634f57=""> </div> <div class="navbar navbar-fixed-top"> <div class="navbar-inner"> <div class="container-fluid"> <a href="https://www.vlaanderen.be/vlaamse-smart-data-space-portaal/blog"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">Blog posts</span> </button> </a> <a href="https://informatievlaanderen.github.io/OSLO-mapping/"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">OSLO mapping</span> </button> </a> <a href="https://informatievlaanderen.github.io/VSDS-Linked-Data-Interactions/"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">Linked Data Interactions</span> </button> </a> <a href="https://informatievlaanderen.github.io/VSDS-LDESServer4J/"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">LDES server</span> </button> </a> <a href="https://informatievlaanderen.github.io/VSDS-Linked-Data-Interactions/ldio/ldio-inputs/ldio-ldes-client"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">LDES client</span> </button> </a> <a href="https://github.com/Informatievlaanderen/VSDS-Onboarding-Example"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">Learn by doing</span> </button> </a> <!-- <form class="navbar-search pull-right" action="http://google.com/search" method="get"> <input type="hidden" name="q" value="site:http://localhost:4000"> <input type="text" name="q" class="input-medium search-query" placeholder="Search"> </form> --> <div class="nav-collapse collapse"> <ul class="nav"> </ul> </div><!--/.nav-collapse --> </div> </div> <style> #help-needed[data-v-df634f57] { display: flex; align-items: center; gap: 5px; background-image: url(https://informatievlaanderen.github.io/OSLO-mapping/assets/images/hulp_nodig.svg); width: 144px; height: 44px; } .custom-border { border: 0.3px solid rgb(0, 200, 171); /* Randkleur */ /* Voeg hier eventueel andere stijlelementen toe */ } .navbar-fixed-top .navbar-inner { margin-top:42px; height: 35px; } .global-header[data-v-df634f57] { display: flex; margin-left: 0px; align-items: center; position: fixed; width: 100%; background-color: white; z-index: 100; } .test-header{ margin-bottom: 20px; overflow:hidden; z-index: 100; } .navbar .btn-navbar { float:right; z-index: 100; } .navbar navbar-fixed-top{ margin-bottom: 20px; overflow:hidden; top:200px; z-index: 100; } element.style { } .small-global-header-divider[data-v-df634f57] { margin: 0 8px 0 4px; } .header-font { color: #333332; font-family: Flanders Art Sans, sans-serif; font-size: 12px; font-style: normal; font-weight: 500; line-height: normal; letter-spacing: 0.5px; text-transform: uppercase; } .spacer { flex-grow: 1; } .divider { border: 1px solid #8f8f8f66; margin: 0; } #help-needed > span[data-v-df634f57] { margin-left: 25px; } /* title of the site */ #header { height: 80px; } #header hgroup { position: absolute; top: 10px; left: 20px; } #header h1 { margin: 0; font-size: 1.75em; font-weight: bold; } #header h2 { color: #ccc; margin: 0 0 4px 16px; line-height: 0.8; font-size: 1.0em; font-weight: normal; } #header a, #header a:hover, #header a:visited { text-decoration: none; } /* header.html: navbar */ .navbar-fixed-top { margin-bottom: 20px; position: static; top:500px; z-index: 100; } .navbar-fixed-top .navbar-inner { padding: 0; border-top: 1px solid #d4d4d4; z-index: 100; } .navbar .nav > .active > a, .navbar .nav > .active > a:hover, .navbar .nav > .active > a:focus { box-shadow: none; } .navbar .btn-navbar { margin-bottom: 5px; } .lt-ie9 .collapse { overflow: visible; /* removed from 2.1.1, but still IE need this */ } /* header.html: dropdown container */ .navbar .nav > li.dropdown-container { position: relative !important; } .navbar .nav > li.dropdown-container .dropdown-link { position: absolute !important; top: 200px; left: 0; z-index: 1; } .navbar .nav > li.dropdown-container .caret { margin-left: 1.5em; } .navbar .nav > li.dropdown-container .dropdown-link + .dropdown-toggle { z-index: 0; } </style> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Technical Documentation </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li></ul> <div class="nav-category">Basic concepts</div> <ul class="nav-list"><li class="nav-list-item"><a href="/introduction/Introduction" class="nav-list-link">Introduction to LDES</a></li><li class="nav-list-item"><a href="/introduction/LDES_server" class="nav-list-link">Publish an LDES</a></li><li class="nav-list-item"><a href="/introduction/LDES_client" class="nav-list-link">Replication and synchronisation</a></li><li class="nav-list-item"><a href="/introduction/Specification" class="nav-list-link">Specification</a></li></ul> <div class="nav-category">Quickstart</div> <ul class="nav-list"><li class="nav-list-item active"><button class="nav-list-expander btn-reset" aria-label="toggle items in Quick start category" aria-pressed="true"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/quickstart/Quickstart" class="nav-list-link">Quick start</a><ul class="nav-list"><li class="nav-list-item "><a href="/quickstart/Consume_LDES" class="nav-list-link">Consume an LDES</a></li><li class="nav-list-item active"><a href="/quickstart/Publish_LDES" class="nav-list-link active">Publish an LDES</a></li></ul></li><li class="nav-list-item"><a href="/quickstart/LDES2services" class="nav-list-link">LDES2Service</a></li><li class="nav-list-item"><a href="/quickstart/Use_case_LDES_server" class="nav-list-link">Use case LDES server</a></li></ul> <div class="nav-category">Release Management</div> <ul class="nav-list"><li class="nav-list-item"><a href="/release/Release_Management" class="nav-list-link">Release management</a></li></ul> </nav> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Technical Documentation" aria-label="Search Technical Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/quickstart/Quickstart">Quick start</a></li> <li class="breadcrumb-nav-list-item"><span>Publish an LDES</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="publish-an-ldes"> <a href="#publish-an-ldes" class="anchor-heading" aria-labelledby="publish-an-ldes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Publish an LDES </h1> <p>This example focuses on both publishing and consuming a <a href="https://semiceu.github.io/LinkedDataEventStreams/">Linked Data Event Stream</a> (LDES). We start by explaining how to setup an LDES server and publish data as an LDES, followed by the setup of the LDES client to replicate an LDES. In this example, the data examples are described with <a href="https://data.vlaanderen.be/">OSLO</a> (the Flemish Interoperability Program) ontologies.</p> <p><a href="https://github.com/Informatievlaanderen/VSDS-Tech-Docs/tree/main/docs/files/quickstart" download=""> The files you will use for this quick start guide is available here </a> <br /> <br /></p> <p class="note">This quick start example demonstrates only a small amount of the capabilities of the LDES Server. For more information about the LDES server, please consult the <a href="https://github.com/Informatievlaanderen/VSDS-LDESServer4J">LDES Server Manual</a>.</p> <h2 id="before-starting"> <a href="#before-starting" class="anchor-heading" aria-labelledby="before-starting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Before starting </h2> <ol> <li>Make sure <a href="https://docker.com/">Docker</a> has been installed on your device.</li> <li>Local Ports <em>8080</em>, and <em>27017</em> are accessible.</li> <li>The command script is written in <a href="https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29">bash</a> code. Please modify it accordingly.</li> </ol> <h2 id="setup-an-ldes-server"> <a href="#setup-an-ldes-server" class="anchor-heading" aria-labelledby="setup-an-ldes-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setup an LDES Server </h2> <p>To start a default LDES Server, a few basic steps are needed.</p> <ul> <li> <p>Create a <code class="language-plaintext highlighter-rouge">ldes-server.yml</code> config file with this basic content</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mongock</span><span class="pi">:</span>
  <span class="na">migration-scan-package</span><span class="pi">:</span> <span class="s">VSDS</span>
<span class="na">springdoc</span><span class="pi">:</span>
  <span class="na">swagger-ui</span><span class="pi">:</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">/v1/swagger</span>
<span class="na">ldes-server</span><span class="pi">:</span>
  <span class="na">host-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">http://localhost:8080"</span>
<span class="na">management</span><span class="pi">:</span>
  <span class="na">tracing</span><span class="pi">:</span>
    <span class="na">enabled</span><span class="pi">:</span> <span class="no">false</span>
<span class="na">spring</span><span class="pi">:</span>
  <span class="na">data</span><span class="pi">:</span>
    <span class="na">mongodb</span><span class="pi">:</span>
      <span class="na">database</span><span class="pi">:</span> <span class="s">ldes</span>
      <span class="na">host</span><span class="pi">:</span> <span class="s">ldes-mongodb</span>
      <span class="na">port</span><span class="pi">:</span> <span class="m">27017</span>
      <span class="na">auto-index-creation</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div> </div> </li> <li> <p>Create a local <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file with the content below.</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.3"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">ldes-server</span><span class="pi">:</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">basic_ldes-server</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">ldes/ldes-server:1.0.0-SNAPSHOT</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">SPRING_CONFIG_LOCATION=/config/</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./ldes-server.yml:/config/application.yml:ro</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">8080:8080</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ldes</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ldes-mongodb</span>
  <span class="na">ldes-mongodb</span><span class="pi">:</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">quick_start_ldes-mongodb</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">mongo:6.0.4</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">27017:27017</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ldes</span>
  <span class="na">ldio-workbench</span><span class="pi">:</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">basic_ldes-replication</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">ldes/ldi-orchestrator:1.0.0-SNAPSHOT</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">SPRING_CONFIG_NAME=application</span>
      <span class="pi">-</span> <span class="s">SPRING_CONFIG_LOCATION=/config/</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./ldio.yml:/config/application.yml:ro</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">${LDIO_WORKBENCH_PORT:-8081}:8080</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ldes</span>
    <span class="na">profiles</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">delay-started</span>
<span class="na">networks</span><span class="pi">:</span>
  <span class="na">ldes</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">quick_start_network</span>
</code></pre></div> </div> </li> <li>Run <code class="language-plaintext highlighter-rouge">docker compose up</code> within the work directory of <code class="language-plaintext highlighter-rouge">.yml</code> file, to start the containers.</li> <li>The LDES Server is now available at port <code class="language-plaintext highlighter-rouge">8080</code> and accepts members via <code class="language-plaintext highlighter-rouge">HTTP POST</code> requests.</li> <li> <p>We will now configure the LDES Server. (note that this part can also be done with the Swagger endpoint (<code class="language-plaintext highlighter-rouge">/v1/swagger</code>), where more detailed documentation is available)</p> </li> <li>Let’s set the DCAT metadata for the server by defining a title and a description:</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> <span class="s1">'POST'</span> <span class="se">\</span>
  <span class="s1">'http://localhost:8080/admin/api/v1/dcat'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'accept: text/plain'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: text/turtle'</span> <span class="se">\</span>
  <span class="nt">---data-raw</span> <span class="s1">'  @prefix dct:   &lt;http://purl.org/dc/terms/&gt; .
                 @prefix dcat:  &lt;http://www.w3.org/ns/dcat#&gt; .

                 [] a dcat:Catalog ;
                    dct:title "My LDES'</span><span class="se">\'</span><span class="s1">'es"@en ;
                    dct:description "All LDES'</span><span class="se">\'</span><span class="s1">'es from publiser X"@en .
        '</span>
</code></pre></div></div> <ul> <li> <p>Next, let’s add collection for our mobility hindrances. This will be used to replicate the dataset from GIPOD:</p> <ul> <li>A collection name “mobility-hindrances”</li> <li>Will process members of type “https://data.vlaanderen.be/ns/mobiliteit#Mobiliteitshinder”</li> <li>Will have 2 views : <ul> <li>A default view, which provides a basic view using a paginated fragmention. This also enables snapshotting. (this view is called <code class="language-plaintext highlighter-rouge">by-page</code> by default)</li> <li>A time-based fragmented view. This will fragment the members based on their timebased property. This value is by default set to <code class="language-plaintext highlighter-rouge">http://www.w3.org/ns/prov#generatedAtTime</code></li> </ul> </li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> <span class="s1">'PUT'</span> <span class="s1">'http://localhost:8080/admin/api/v1/eventstreams'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'accept: text/turtle'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: text/turtle'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'@prefix ldes: &lt;https://w3id.org/ldes#&gt; .
            @prefix dcterms: &lt;http://purl.org/dc/terms/&gt; .
            @prefix tree: &lt;https://w3id.org/tree#&gt;.
            @prefix sh:   &lt;http://www.w3.org/ns/shacl#&gt; .
            @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .
            @prefix example: &lt;http://example.org/&gt; .
            @prefix collection: &lt;/mobility-hindrances/&gt; .


            &lt;/mobility-hindrances&gt; a ldes:EventStream ;
                ldes:timestampPath dcterms:created ;
                ldes:versionOfPath dcterms:isVersionOf ;
                example:memberType &lt;https://data.vlaanderen.be/ns/mobiliteit#Mobiliteitshinder&gt; ;
                example:hasDefaultView "true"^^xsd:boolean ;
                ldes:view collection:time-based ;
                tree:shape [
                    a sh:NodeShape ;
                ] .

            collection:time-based tree:viewDescription [
                ldes:retentionPolicy [
                    a ldes:DurationAgoPolicy  ;
                    tree:value "PT2M"^^xsd:duration ;
                ] ;
                tree:fragmentationStrategy ([
                    a tree:Fragmentation ;
                    tree:name "timebased" ;
                    tree:memberLimit "20" ;
                ]) ;
            ] .
    '</span>
</code></pre></div> </div> </li> <li> <p>Let’s add some DCAT metadata for this collection:</p> <ul> <li>We define an English and Dutch title and description</li> <li>We define the creator of the collection to be http://sample.org/company/MyDataOwner</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> <span class="s1">'POST'</span> <span class="se">\</span>
<span class="s1">'http://localhost:8080/admin/api/v1/eventstreams/mobility-hindrances/dcat'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'accept: */*'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: text/turtle'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'  @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; .
      @prefix dct: &lt;http://purl.org/dc/terms/&gt; .
        [] a dcat:Dataset ;
            dct:title "Mobility Hindrances Collection"@en ;
            dct:title "Mobiliteitshindernissen collectie"@nl ;
            dct:description "A collection containing mobility hindrances"@en ;
            dct:description "Een collectie met Mobiliteitshindernissen"@nl ;
            dct:creator &lt;http://sample.org/company/MyDataOwner&gt; ;'</span>
</code></pre></div> </div> </li> <li> <p>We’ll now also set the DCAT metadata for the time-based view by defining a title and a description :</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> <span class="s1">'POST'</span> <span class="se">\</span>
<span class="s1">'http://localhost:8080/admin/api/v1/eventstreams/mobility-hindrances/views/time-based/dcat'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'accept: */*'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: text/turtle'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'@prefix dct:   &lt;http://purl.org/dc/terms/&gt; .
    @prefix dcat:  &lt;http://www.w3.org/ns/dcat#&gt; .

    [] a dcat:DataService ;
    dct:title "My timebased view"@en ;
    dct:description "Timebased fragmentation for the mobility-hindrances "@en .
    '</span>
</code></pre></div> </div> </li> <li> <p>Next, let’s add a second collection to collect observations:</p> <ul> <li>A collection name “observations”</li> <li>Will process members of type “https://data.vlaanderen.be/ns/mobiliteit#ObservationCollection”</li> <li>Will have a default view, which provides a basic view using a paginated fragmention. This also enables snapshotting.</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> <span class="s1">'PUT'</span> <span class="s1">'http://localhost:8080/admin/api/v1/eventstreams'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'accept: text/turtle'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: text/turtle'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'@prefix ldes: &lt;https://w3id.org/ldes#&gt; .
            @prefix example: &lt;http://example.org/&gt; .
            @prefix dcterms: &lt;http://purl.org/dc/terms/&gt; .
            @prefix tree: &lt;https://w3id.org/tree#&gt;.
            @prefix sh:   &lt;http://www.w3.org/ns/shacl#&gt; .
            @prefix server: &lt;http://localhost:8080/&gt; .
            @prefix xsd:  &lt;http://www.w3.org/2001/XMLSchema#&gt; .


            server:observations a ldes:EventStream ;
                ldes:timestampPath dcterms:created ;
                ldes:versionOfPath dcterms:isVersionOf ;
                example:memberType &lt;https://data.vlaanderen.be/ns/mobiliteit#ObservationCollection&gt; ;
                example:hasDefaultView "true"^^xsd:boolean ;
                tree:shape [
                    a sh:NodeShape ;
                ] .
            '</span>
</code></pre></div> </div> </li> </ul> <h2 id="add-data-to-the-ldes-server"> <a href="#add-data-to-the-ldes-server" class="anchor-heading" aria-labelledby="add-data-to-the-ldes-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add data to the LDES Server </h2> <ul> <li> <p>Create a <code class="language-plaintext highlighter-rouge">observation.ttl</code> file with the following content:</p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">dc:</span><span class="w"> </span><span class="nl">&lt;http://purl.org/dc/terms/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">prov:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/ns/prov#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">xsd:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">sosa:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/ns/sosa/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns0:</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/SamplingFeature#SF_SamplingFeatureCollection.&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns1:</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/Observation#OM_Observation.&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns2:</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19103/2005/UnitsOfMeasure#Measure.&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns3:</span><span class="w"> </span><span class="nl">&lt;https://schema.org/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;urn:ngsi-ld:WaterQualityObserved:woq:1/2023-03-12T18:31:17.003Z&gt;</span><span class="w">
</span><span class="nn">dc:</span><span class="n">isVersionOf</span><span class="w"> </span><span class="nl">&lt;urn:ngsi-ld:WaterQualityObserved:woq:1&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="nn">prov:</span><span class="n">generatedAtTime</span><span class="w"> </span><span class="s">"2023-03-12T18:31:17.003Z"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">dateTime</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="nn">sosa:</span><span class="n">hasFeatureOfInterest</span><span class="w"> </span><span class="s">"spt-00035-79"</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="nn">ns0:</span><span class="n">member</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/loc-00019-33&gt;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="nn">sosa:</span><span class="n">madeBySensor</span><span class="w"> </span><span class="nl">&lt;urn:ngsi-v2:cot-imec-be:Device:imec-iow-UR5gEycRuaafxnhvjd9jnU&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">result</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nn">ns2:</span><span class="n">value</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">value</span><span class="w"> </span><span class="mf">2.0</span><span class="mi">43000</span><span class="n">e+1</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">unitCode</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/CEL&gt;</span><span class="w">
    </span><span class="p">]</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">phenomenonTime</span><span class="w"> </span><span class="s">"2023-03-12T18:31:17.003Z"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">datetime</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">observedProperty</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/concept/waterkwaliteitparameter/temperatuur&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">featureOfInterest</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/spt-00035-79&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="k">a</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/Measurement#OM_Measurement&gt;</span><span class="w">
</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="nn">sosa:</span><span class="n">madeBySensor</span><span class="w"> </span><span class="nl">&lt;urn:ngsi-v2:cot-imec-be:Device:imec-iow-UR5gEycRuaafxnhvjd9jnU&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">result</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nn">ns2:</span><span class="n">value</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">value</span><span class="w"> </span><span class="mi">1442</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">unitCode</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/HP&gt;</span><span class="w">
    </span><span class="p">]</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">phenomenonTime</span><span class="w"> </span><span class="s">"2023-03-12T18:31:17.003Z"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">datetime</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">observedProperty</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/concept/observatieparameter/hydrostatische-druk&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">featureOfInterest</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/spt-00035-79&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="k">a</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/Measurement#OM_Measurement&gt;</span><span class="w">
</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="nn">sosa:</span><span class="n">madeBySensor</span><span class="w"> </span><span class="nl">&lt;urn:ngsi-v2:cot-imec-be:Device:imec-iow-UR5gEycRuaafxnhvjd9jnU&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">result</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nn">ns2:</span><span class="n">value</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">value</span><span class="w"> </span><span class="mi">6150</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">unitCode</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/G42&gt;</span><span class="w">
    </span><span class="p">]</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">phenomenonTime</span><span class="w"> </span><span class="s">"2023-03-12T18:31:17.003Z"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">datetime</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">observedProperty</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/concept/waterkwaliteitparameter/conductiviteit&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">featureOfInterest</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/spt-00035-79&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="k">a</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/Measurement#OM_Measurement&gt;</span><span class="w">
</span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="k">a</span><span class="w"> </span><span class="nl">&lt;https://data.vlaanderen.be/ns/mobiliteit#ObservationCollection&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;https://data.vmm.be/id/loc-00019-33&gt;</span><span class="w"> </span><span class="k">a</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/SpatialSamplingFeature#SF_SpatialSamplingFeature&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div> </div> </li> <li> <p>Run the following command to post the <code class="language-plaintext highlighter-rouge">observation.ttl</code> to the LDES Server.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> POST http://localhost:8080/observations <span class="nt">-H</span> <span class="s2">"Content-Type: application/ttl"</span> <span class="nt">-d</span> <span class="s2">"@observation.ttl"</span>
</code></pre></div> </div> </li> </ul> <h2 id="replicating-an-ldes-using-the-ldes-client"> <a href="#replicating-an-ldes-using-the-ldes-client" class="anchor-heading" aria-labelledby="replicating-an-ldes-using-the-ldes-client"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Replicating an LDES using the LDES Client </h2> <ul> <li> <p>Create a <code class="language-plaintext highlighter-rouge">ldio.yml</code> file in the same directory as your <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> with the following content:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">orchestrator</span><span class="pi">:</span>
  <span class="na">pipelines</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">gipod-replicator</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">HTTP</span><span class="nv"> </span><span class="s">polling,</span><span class="nv"> </span><span class="s">OSLO</span><span class="nv"> </span><span class="s">transformation,</span><span class="nv"> </span><span class="s">version</span><span class="nv"> </span><span class="s">creation</span><span class="nv"> </span><span class="s">&amp;</span><span class="nv"> </span><span class="s">HTTP</span><span class="nv"> </span><span class="s">sending."</span>
      <span class="na">input</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">be.vlaanderen.informatievlaanderen.ldes.ldi.client.LdioLdesClient</span>
        <span class="na">config</span><span class="pi">:</span>
          <span class="na">url</span><span class="pi">:</span> <span class="s">https://private-api.gipod.vlaanderen.be/api/v1/ldes/mobility-hindrances</span>
      <span class="na">outputs</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">be.vlaanderen.informatievlaanderen.ldes.ldio.LdioHttpOut</span>
          <span class="na">config</span><span class="pi">:</span>
            <span class="na">endpoint</span><span class="pi">:</span> <span class="s">http://host.docker.internal:8080/mobility-hindrances</span>
            <span class="na">content-type</span><span class="pi">:</span> <span class="s">application/n-quads</span>
</code></pre></div> </div> </li> <li> <p>Execute the following command to start up the LDIO <code class="language-plaintext highlighter-rouge">docker compose up ldio-workbench -d</code></p> </li> <li> <p>Validate your LDES server is being populated by going to <code class="language-plaintext highlighter-rouge">http://localhost:8080/mobility-hindrances/by-page?pageNumber=1</code> and <code class="language-plaintext highlighter-rouge">http://localhost:8080/mobility-hindrances/time-based</code>. These streams should fill up as the LDES Client send members to your server.</p> </li> </ul> <h2 id="tear-down-the-infrastructure-and-remove-the-volumes"> <a href="#tear-down-the-infrastructure-and-remove-the-volumes" class="anchor-heading" aria-labelledby="tear-down-the-infrastructure-and-remove-the-volumes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Tear down the infrastructure and remove the volumes </h2> <ul> <li>Within the working directory, please run <code class="language-plaintext highlighter-rouge">docker rm -f $(docker ps -a -q)</code></li> </ul> </main> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0"></p> <div class="d-flex mt-2"> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.3/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script> </body> </html>

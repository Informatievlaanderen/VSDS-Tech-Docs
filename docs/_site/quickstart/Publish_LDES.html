<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Publish an LDES | Technical Documentation</title> <meta name="generator" content="Jekyll v3.9.3" /> <meta property="og:title" content="Publish an LDES" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Publish an LDES" /> <meta property="og:description" content="Publish an LDES" /> <link rel="canonical" href="http://localhost:4000/quickstart/Publish_LDES" /> <meta property="og:url" content="http://localhost:4000/quickstart/Publish_LDES" /> <meta property="og:site_name" content="Technical Documentation" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2024-02-26T15:17:03+01:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Publish an LDES" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-02-26T15:17:03+01:00","datePublished":"2024-02-26T15:17:03+01:00","description":"Publish an LDES","headline":"Publish an LDES","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/quickstart/Publish_LDES"},"url":"http://localhost:4000/quickstart/Publish_LDES"}</script> <!-- End Jekyll SEO tag --> <div class="test-header" data-v-df634f57="" data-v-7a7a37b1=""> <div class="global-header" data-v-df634f57=""><img src="/assets/images/LOGO_Vlaanderen_NIV2.svg" alt="Vlaanderen" data-v-df634f57=""><img class="small-global-header-divider" src="/assets/images/divider_globalheader.svg" alt="divider" data-v-df634f57=""><span class="header-title header-font" data-v-df634f57="">Vlaamse Smart Data Space</span><span class="spacer" data-v-df634f57=""></span> <div id="help-needed" data-v-df634f57=""><span class="header-font" data-v-df634f57="">Hulp nodig</span><a id="help" href="https://www.vlaanderen.be/vlaamse-smart-data-space-portaal/contact"><img class="question-menu-item" src="/assets/images/question-mark.svg" alt="?" data-v-df634f57=""></a></div> </div> <hr class="divider" data-v-df634f57=""> </div> <div class="navbar navbar-fixed-top"> <div class="navbar-inner"> <div class="container-fluid"> <a href="https://informatievlaanderen.github.io/VSDS-Tech-Docs/"> <button type="button" class="btn btn-navbar custom-border-activated" > <span class="nav-icon-bar">Home</span> </button> </a> <a href="https://github.com/Informatievlaanderen/VSDS-Onboarding-Example"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">Tutorial</span> </button> </a> <a href="https://informatievlaanderen.github.io/VSDS-Linked-Data-Interactions/"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">Linked Data Interactions</span> </button> </a> <a href="https://informatievlaanderen.github.io/VSDS-LDESServer4J/"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">LDES server</span> </button> </a> <a href="https://informatievlaanderen.github.io/VSDS-Linked-Data-Interactions/ldio/ldio-inputs/ldio-ldes-client"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">LDES client</span> </button> </a> <a href="https://www.vlaanderen.be/vlaamse-smart-data-space-portaal/blog"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">Blog posts</span> </button> </a> <a href="https://informatievlaanderen.github.io/OSLO-mapping/"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">OSLO mapping</span> </button> </a> </div> </div> </div> <style> #help-needed[data-v-df634f57] { display: flex; align-items: center; gap: 5px; background-image: url(https://informatievlaanderen.github.io/OSLO-mapping/assets/images/hulp_nodig.svg); width: 144px; height: 44px; } .custom-border-activated { background-color: rgb(255, 230, 21); } .custom-border { border: 0.3px solid rgb(0, 200, 171); /* Randkleur */ /* Voeg hier eventueel andere stijlelementen toe */ } .navbar-fixed-top .navbar-inner { margin-top:30px; height: 35px; padding: 0; border-top: 1px solid #d4d4d4; z-index: 1000; position: fixed; right:0px; } @media (min-width: 50rem) .navbar-fixed-top { position: relative !important; width: auto !important; height: 100% !important; padding: 0; transition: none; } .global-header[data-v-df634f57] { display: flex; margin-left: 0px; align-items: center; position: fixed; width: 100%; background-color: white; z-index: 100; } .test-header{ margin-bottom: 20px; overflow:hidden; z-index: 100; } element.style { } .small-global-header-divider[data-v-df634f57] { margin: 0 8px 0 4px; } .header-font { color: #333332; font-family: Flanders Art Sans, sans-serif; font-size: 12px; font-style: normal; font-weight: 500; line-height: normal; letter-spacing: 0.5px; text-transform: uppercase; } .spacer { flex-grow: 1; } .divider { border: 1px solid #8f8f8f66; margin: 0; } #help-needed > span[data-v-df634f57] { margin-left: 25px; } /* title of the site */ #header { height: 80px; } #header hgroup { position: absolute; top: 10px; left: 20px; } #header h1 { margin: 0; font-size: 1.75em; font-weight: bold; } #header h2 { color: #ccc; margin: 0 0 4px 16px; line-height: 0.8; font-size: 1.0em; font-weight: normal; } #header a, #header a:hover, #header a:visited { text-decoration: none; } .navbar .nav > .active > a, .navbar .nav > .active > a:hover, .navbar .nav > .active > a:focus { box-shadow: none; } .navbar .btn-navbar { margin-bottom: 5px; } </style> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Technical Documentation </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li></ul> <div class="nav-category">Basic concepts</div> <ul class="nav-list"><li class="nav-list-item"><a href="/introduction/linked_data" class="nav-list-link">Basic concept Linked Data</a></li><li class="nav-list-item"><a href="/introduction/LDES_client" class="nav-list-link">Consume an LDES</a></li><li class="nav-list-item"><a href="/introduction/Introduction" class="nav-list-link">Introduction to LDES</a></li><li class="nav-list-item"><a href="/introduction/LDES_server" class="nav-list-link">Publish an LDES</a></li><li class="nav-list-item"><a href="/introduction/Specification" class="nav-list-link">Specification</a></li></ul> <div class="nav-category">Quickstart</div> <ul class="nav-list"><li class="nav-list-item active"><button class="nav-list-expander btn-reset" aria-label="toggle items in Quick start category" aria-pressed="true"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/quickstart/Quickstart" class="nav-list-link">Quick start</a><ul class="nav-list"><li class="nav-list-item "><a href="/quickstart/Consume_LDES" class="nav-list-link">Consume an LDES</a></li><li class="nav-list-item active"><a href="/quickstart/Publish_LDES" class="nav-list-link active">Publish an LDES</a></li></ul></li><li class="nav-list-item"><a href="/quickstart/LDES2services" class="nav-list-link">LDES2Service</a></li><li class="nav-list-item"><a href="/quickstart/Use_case_LDES_server" class="nav-list-link">Use case LDES server</a></li></ul> <div class="nav-category">Release Management</div> <ul class="nav-list"><li class="nav-list-item"><a href="/release/Release_Management" class="nav-list-link">Release management</a></li></ul> </nav> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Technical Documentation" aria-label="Search Technical Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/quickstart/Quickstart">Quick start</a></li> <li class="breadcrumb-nav-list-item"><span>Publish an LDES</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="publish-an-ldes"> <a href="#publish-an-ldes" class="anchor-heading" aria-labelledby="publish-an-ldes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Publish an LDES </h1> <p>This example focuses on both publishing and consuming a <a href="https://semiceu.github.io/LinkedDataEventStreams/">Linked Data Event Stream</a> (LDES). We start by explaining how to setup an LDES server and publish data as an LDES, followed by the setup of the LDES client to replicate an LDES. In this example, the data examples are described with <a href="https://data.vlaanderen.be/">OSLO</a> (the Flemish Interoperability Program) ontologies.</p> <p class="note">In this example we will show you that it is possible to publish multiple different types of LDES’es with one LDES server; an LDES with observations and an LDES with Mobility Hindrance.</p> <p><a href="https://github.com/Informatievlaanderen/VSDS-Tech-Docs/tree/main/docs/files/quickstart" download=""> The files you will use for this quick start guide are here available </a> <br /> <br /></p> <p class="note">This quick start example demonstrates only a small amount of the capabilities of the LDES Server. For more information about the LDES server, please consult the <a href="https://informatievlaanderen.github.io/VSDS-LDESServer4J/configuration/event-stream">Configuring a new Event Stream</a> in the <a href="https://informatievlaanderen.github.io/VSDS-LDESServer4J/">LDES Server Manual</a>.</p> <h2 id="before-starting"> <a href="#before-starting" class="anchor-heading" aria-labelledby="before-starting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Before starting </h2> <ol> <li>Make sure <a href="https://docker.com/">Docker</a> has been installed on your device.</li> <li>Local Ports <em>8080</em>, and <em>27017</em> are accessible.</li> <li>The command script is written in <a href="https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29">bash</a> code. Please modify it accordingly.</li> </ol> <h2 id="setup-an-ldes-server"> <a href="#setup-an-ldes-server" class="anchor-heading" aria-labelledby="setup-an-ldes-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setup an LDES Server </h2> <p>To start a default LDES Server, a few basic steps are needed.</p> <ul> <li> <p>Create a <code class="language-plaintext highlighter-rouge">ldes-server.yml</code> config file with this basic content</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mongock</span><span class="pi">:</span>
  <span class="na">migration-scan-package</span><span class="pi">:</span> <span class="s">VSDS</span>
<span class="na">springdoc</span><span class="pi">:</span>
  <span class="na">swagger-ui</span><span class="pi">:</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">/v1/swagger</span>
<span class="na">ldes-server</span><span class="pi">:</span>
  <span class="na">host-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">http://localhost:8080"</span>
<span class="na">management</span><span class="pi">:</span>
  <span class="na">tracing</span><span class="pi">:</span>
    <span class="na">enabled</span><span class="pi">:</span> <span class="no">false</span>
<span class="na">spring</span><span class="pi">:</span>
  <span class="na">data</span><span class="pi">:</span>
    <span class="na">mongodb</span><span class="pi">:</span>
      <span class="na">database</span><span class="pi">:</span> <span class="s">ldes</span>
      <span class="na">host</span><span class="pi">:</span> <span class="s">ldes-mongodb</span>
      <span class="na">port</span><span class="pi">:</span> <span class="m">27017</span>
      <span class="na">auto-index-creation</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div> </div> </li> <li> <p>Create a local <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file with the content below.</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.3"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">ldes-server</span><span class="pi">:</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">basic_ldes-server</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">ldes/ldes-server:2.10.0-SNAPSHOT</span> <span class="c1"># you can safely change this to the latest 2.x.y version</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">SPRING_CONFIG_LOCATION=/config/</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./ldes-server.yml:/config/application.yml:ro</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">8080:8080</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ldes</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ldes-mongodb</span>
  <span class="na">ldes-mongodb</span><span class="pi">:</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">quick_start_ldes-mongodb</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">mongo:6.0.4</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">27017:27017</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ldes</span>
  <span class="na">ldio-workbench</span><span class="pi">:</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">basic_ldes-replication</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">ldes/ldi-orchestrator:1.0.0-SNAPSHOT</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">SPRING_CONFIG_NAME=application</span>
      <span class="pi">-</span> <span class="s">SPRING_CONFIG_LOCATION=/config/</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./ldio.yml:/config/application.yml:ro</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">${LDIO_WORKBENCH_PORT:-8081}:8080</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ldes</span>
    <span class="na">profiles</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">delay-started</span>
<span class="na">networks</span><span class="pi">:</span>
  <span class="na">ldes</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">quick_start_network</span>
</code></pre></div> </div> </li> <li> <p>Run this command within the work directory of <code class="language-plaintext highlighter-rouge">.yml</code> file, to start the containers:</p> </li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker compose up <span class="nt">-d</span>
<span class="k">while</span> <span class="o">!</span> docker logs <span class="si">$(</span>docker ps <span class="nt">-q</span> <span class="nt">-f</span> <span class="s2">"name=ldes-server$"</span><span class="si">)</span> 2&gt; /dev/null | <span class="nb">grep</span> <span class="s1">'Started Application in'</span> <span class="p">;</span> <span class="k">do </span><span class="nb">sleep </span>1<span class="p">;</span> <span class="k">done</span>
</code></pre></div></div> <p class="note">Note that we start the containers as deamons and then wait for the LDES server to be available by checking every second that the container log file contains the magic string Started Application in. You could also simply start it with docker compose up and wait until you actually see this magic string, but then you need to open a new command shell to execute the commands in the next sections.</p> <ul> <li>The LDES Server is now available at port <code class="language-plaintext highlighter-rouge">8080</code> and accepts members via <code class="language-plaintext highlighter-rouge">HTTP POST</code> requests.</li> <li> <p>We will now configure the LDES Server. (note that this part can also be done with the Swagger endpoint (<code class="language-plaintext highlighter-rouge">/v1/swagger</code>), where more detailed documentation is available)</p> </li> <li>Let’s set the DCAT metadata for the server by defining a title and a description:</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> <span class="s1">'POST'</span> <span class="se">\</span>
  <span class="s1">'http://localhost:8080/admin/api/v1/dcat'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'accept: text/plain'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: text/turtle'</span> <span class="se">\</span>
  <span class="nt">--data-raw</span> <span class="s1">'  @prefix dct:   &lt;http://purl.org/dc/terms/&gt; .
                 @prefix dcat:  &lt;http://www.w3.org/ns/dcat#&gt; .

                 [] a dcat:Catalog ;
                    dct:title "My LDES'</span><span class="se">\'</span><span class="s1">'es"@en ;
                    dct:description "All LDES'</span><span class="se">\'</span><span class="s1">'es from publiser X"@en .
        '</span>
</code></pre></div></div> <ul> <li> <p>Next, let’s add a collection for our mobility hindrances. This will be used to replicate the dataset from GIPOD:</p> <ul> <li>A collection name “mobility-hindrances”</li> <li>Will process members of type “https://data.vlaanderen.be/ns/mobiliteit#Mobiliteitshinder”</li> <li>Will have 2 views :</li> <li>The first view provides a basic view using a paginated fragmention (this view is called <code class="language-plaintext highlighter-rouge">pagination</code>). <ul> <li>A time-based fragmented view. This will fragment the members based on their timebased property (this view is called <code class="language-plaintext highlighter-rouge">pagination</code>). This value is by default set to <code class="language-plaintext highlighter-rouge">http://www.w3.org/ns/prov#generatedAtTime</code></li> </ul> </li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> <span class="s1">'POST'</span> <span class="se">\</span>
<span class="s1">'http://localhost:8080/admin/api/v1/eventstreams'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'accept: text/turtle'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: text/turtle'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'  @prefix ldes: &lt;https://w3id.org/ldes#&gt; .
              @prefix dcterms: &lt;http://purl.org/dc/terms/&gt; .
              @prefix tree: &lt;https://w3id.org/tree#&gt;.
              @prefix sh:   &lt;http://www.w3.org/ns/shacl#&gt; .
              @prefix server: &lt;http://localhost:8080/&gt; .
              @prefix xsd:  &lt;http://www.w3.org/2001/XMLSchema#&gt; .
              @prefix collection: &lt;http://localhost:8080/mobility-hindrances/&gt; .

              server:mobility-hindrances a ldes:EventStream ;
                  ldes:timestampPath dcterms:created ;
                  ldes:versionOfPath dcterms:isVersionOf ;
                  tree:shape collection:shape .

              collection:shape a sh:NodeShape ;
                  sh:targetClass &lt;https://data.vlaanderen.be/ns/mobiliteit#Mobiliteitshinder&gt; .
                

              collection:timebased tree:viewDescription [
                  tree:fragmentationStrategy ([
                    a tree:HierarchicalTimeBasedFragmentation ;
                    ldes:timestampPath dcterms:created 
                    tree:maxGranularity "day" ;
                    tree:fragmentationPath ldes:timestampPath ;
                    ]) ;
                    tree:pageSize "100"^^&lt;http://www.w3.org/2001/XMLSchema#int&gt; ;
                ] .
              
              collection:pagination tree:viewDescription [
                  tree:fragmentationStrategy  () ;
                    tree:pageSize "100"^^&lt;http://www.w3.org/2001/XMLSchema#int&gt; ;
                ] .

          '</span>
</code></pre></div> </div> </li> <li> <p>Let’s add some DCAT metadata for this collection:</p> <ul> <li>We define an English and Dutch title and description</li> <li>We define the creator of the collection to be http://sample.org/company/MyDataOwner</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> <span class="s1">'POST'</span> <span class="se">\</span>
<span class="s1">'http://localhost:8080/admin/api/v1/eventstreams/mobility-hindrances/dcat'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'accept: */*'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: text/turtle'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'  @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; .
      @prefix dct: &lt;http://purl.org/dc/terms/&gt; .
        [] a dcat:Dataset ;
            dct:title "Mobility Hindrances Collection"@en ;
            dct:title "Mobiliteitshindernissen collectie"@nl ;
            dct:description "A collection containing mobility hindrances"@en ;
            dct:description "Een collectie met Mobiliteitshindernissen"@nl ;
            dct:creator &lt;http://sample.org/company/MyDataOwner&gt; ;'</span>
</code></pre></div> </div> </li> <li> <p>We’ll now also set the DCAT metadata for the time-based view by defining a title and a description :</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> <span class="s1">'POST'</span> <span class="se">\</span>
<span class="s1">'http://localhost:8080/admin/api/v1/eventstreams/mobility-hindrances/views/by-time/dcat'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'accept: */*'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: text/turtle'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'@prefix dct:   &lt;http://purl.org/dc/terms/&gt; .
    @prefix dcat:  &lt;http://www.w3.org/ns/dcat#&gt; .

    [] a dcat:DataService ;
    dct:title "My timebased view"@en ;
    dct:description "Timebased fragmentation for the mobility-hindrances "@en .
    '</span>
</code></pre></div> </div> </li> </ul> <h2 id="add-mobility-hindrance-data-to-the-ldes-server"> <a href="#add-mobility-hindrance-data-to-the-ldes-server" class="anchor-heading" aria-labelledby="add-mobility-hindrance-data-to-the-ldes-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add mobility hindrance data to the LDES Server </h2> <p>Now we have shaped the LDES structure it is possible to add data to this Linked Data Event Stream.</p> <ul> <li> <p>Create a <code class="language-plaintext highlighter-rouge">mobility-hindrance.ttl</code> file with the following content:</p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">&lt;https://private-api.gipod.vlaanderen.be/api/v1/taxonomies/zonetypes/0fb72ef7-6ac9-4a70-b295-a30ea215d250&gt;</span><span class="w">
        </span><span class="nl">&lt;http://www.w3.org/2004/02/skos/core#prefLabel&gt;</span><span class="w">
                </span><span class="s">"HinderZone"</span><span class="na">@nl-BE</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;https://private-api.gipod.vlaanderen.be/api/v1/mobility-hindrances/10590495/973&gt;</span><span class="w">
        </span><span class="k">a</span><span class="w">       </span><span class="nl">&lt;https://data.vlaanderen.be/ns/mobiliteit#Mobiliteitshinder&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;http://purl.org/dc/elements/1.1/contributor&gt;</span><span class="w">
                </span><span class="p">[</span><span class="w"> </span><span class="k">a</span><span class="w">       </span><span class="nl">&lt;http://www.w3.org/ns/org#Organization&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
                  </span><span class="nl">&lt;http://purl.org/dc/terms/isVersionOf&gt;</span><span class="w">
                          </span><span class="nl">&lt;https://private-api.gipod.vlaanderen.be/api/v1/organisations/94204bd6-a6e5-0207-b722-643889e41d15&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
                  </span><span class="nl">&lt;http://www.w3.org/2004/02/skos/core#prefLabel&gt;</span><span class="w">
                          </span><span class="s">"Stad Ronse"</span><span class="p">^^</span><span class="nl">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#langString&gt;</span><span class="w">
                </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;http://purl.org/dc/elements/1.1/creator&gt;</span><span class="w">
                </span><span class="p">[</span><span class="w"> </span><span class="k">a</span><span class="w">       </span><span class="nl">&lt;http://www.w3.org/ns/org#Organization&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
                  </span><span class="nl">&lt;http://purl.org/dc/terms/isVersionOf&gt;</span><span class="w">
                          </span><span class="nl">&lt;https://private-api.gipod.vlaanderen.be/api/v1/organisations/94204bd6-a6e5-0207-b722-643889e41d15&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
                  </span><span class="nl">&lt;http://www.w3.org/2004/02/skos/core#prefLabel&gt;</span><span class="w">
                          </span><span class="s">"Stad Ronse"</span><span class="p">^^</span><span class="nl">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#langString&gt;</span><span class="w">
                </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;http://purl.org/dc/terms/created&gt;</span><span class="w">
                </span><span class="s">"2021-01-06T13:38:39.21Z"</span><span class="p">^^</span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;http://purl.org/dc/terms/description&gt;</span><span class="w">
                </span><span class="s">"9600 Ronse - Pierre D'Hauwerstraat 5 - parkeerverbod"</span><span class="p">^^</span><span class="nl">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#langString&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;http://purl.org/dc/terms/isVersionOf&gt;</span><span class="w">
                </span><span class="nl">&lt;https://private-api.gipod.vlaanderen.be/api/v1/mobility-hindrances/10590495&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;http://purl.org/dc/terms/modified&gt;</span><span class="w">
                </span><span class="s">"2021-01-06T13:39:23.79Z"</span><span class="p">^^</span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;http://www.w3.org/ns/adms#identifier&gt;</span><span class="w">
                </span><span class="p">[</span><span class="w"> </span><span class="k">a</span><span class="w">       </span><span class="nl">&lt;http://www.w3.org/ns/adms#Identifier&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
                  </span><span class="nl">&lt;http://www.w3.org/2004/02/skos/core#notation&gt;</span><span class="w">
                          </span><span class="s">"10590495"</span><span class="p">^^</span><span class="nl">&lt;https://gipod.vlaanderen.be/ns/gipod#gipodId&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
                  </span><span class="nl">&lt;http://www.w3.org/ns/adms#schemaAgency&gt;</span><span class="w">
                          </span><span class="s">"https://gipod.vlaanderen.be"</span><span class="na">@nl-BE</span><span class="w">
                </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;http://www.w3.org/ns/adms#versionNotes&gt;</span><span class="w">
                </span><span class="s">"MobilityHindranceWasImportedFromLegacy"</span><span class="na">@nl-BE</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;http://www.w3.org/ns/prov#generatedAtTime&gt;</span><span class="w">
                </span><span class="s">"2021-01-06T18:05:11.813Z"</span><span class="p">^^</span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;https://data.vlaanderen.be/ns/mobiliteit#Inname.status&gt;</span><span class="w">
                </span><span class="nl">&lt;https://private-api.gipod.vlaanderen.be/api/v1/taxonomies/statuses/a411c53e-db33-436a-9bb9-d62d535b661d&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;https://data.vlaanderen.be/ns/mobiliteit#beheerder&gt;</span><span class="w">
                </span><span class="p">[</span><span class="w"> </span><span class="k">a</span><span class="w">       </span><span class="nl">&lt;http://www.w3.org/ns/org#Organization&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
                  </span><span class="nl">&lt;http://purl.org/dc/terms/isVersionOf&gt;</span><span class="w">
                          </span><span class="nl">&lt;https://private-api.gipod.vlaanderen.be/api/v1/organisations/94204bd6-a6e5-0207-b722-643889e41d15&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
                  </span><span class="nl">&lt;http://www.w3.org/2004/02/skos/core#prefLabel&gt;</span><span class="w">
                          </span><span class="s">"Stad Ronse"</span><span class="p">^^</span><span class="nl">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#langString&gt;</span><span class="w">
                </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;https://data.vlaanderen.be/ns/mobiliteit#periode&gt;</span><span class="w">
                </span><span class="p">[</span><span class="w"> </span><span class="k">a</span><span class="w">       </span><span class="nl">&lt;http://data.europa.eu/m8g/PeriodOfTime&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
                  </span><span class="nl">&lt;http://data.europa.eu/m8g/endTime&gt;</span><span class="w">
                          </span><span class="s">"2021-01-21T17:00:00Z"</span><span class="p">^^</span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
                  </span><span class="nl">&lt;http://data.europa.eu/m8g/startTime&gt;</span><span class="w">
                          </span><span class="s">"2021-01-21T06:00:00Z"</span><span class="p">^^</span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt;</span><span class="w">
                </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;https://data.vlaanderen.be/ns/mobiliteit#zone&gt;</span><span class="w">
                </span><span class="nl">&lt;https://private-api.gipod.vlaanderen.be/api/v1/mobility-hindrances/10590495/zones/317e0d17-1a07-4ad9-b19f-7780ea2e25f0&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;https://gipod.vlaanderen.be/ns/gipod#gipodId&gt;</span><span class="w">
                </span><span class="mi">10590495</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;https://private-api.gipod.vlaanderen.be/api/v1/ldes/mobility-hindrances&gt;</span><span class="w">
        </span><span class="nl">&lt;https://w3id.org/tree#member&gt;</span><span class="w">  </span><span class="nl">&lt;https://private-api.gipod.vlaanderen.be/api/v1/mobility-hindrances/10590495/973&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;https://private-api.gipod.vlaanderen.be/api/v1/mobility-hindrances/10590495/zones/317e0d17-1a07-4ad9-b19f-7780ea2e25f0&gt;</span><span class="w">
        </span><span class="k">a</span><span class="w">       </span><span class="nl">&lt;https://data.vlaanderen.be/ns/mobiliteit#Zone&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;http://www.w3.org/ns/locn#geometry&gt;</span><span class="w">
                </span><span class="p">[</span><span class="w"> </span><span class="k">a</span><span class="w">       </span><span class="nl">&lt;http://www.w3.org/ns/locn#Geometry&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
                  </span><span class="nl">&lt;http://www.opengis.net/ont/geosparql#asWKT&gt;</span><span class="w">
                          </span><span class="s">"&lt;http://www.opengis.net/def/crs/EPSG/9.9.1/31370&gt; POLYGON ((95546.9552656286 159461.9612512481, 95547.04574184009 159461.96319760388, 95547.13603738231 159461.96923483865, 95547.22596738115 159461.97935059154, 95547.31534771094 159461.99352415127, 95547.40399537141 159462.0117264984, 95547.4917288624 159462.03392036483, 95547.57836855543 159462.06006031015, 95547.6637370615 159462.09009281447, 95547.74765959433 159462.12395638833, 95547.82996432808 159462.16158169828, 95547.91048274934 159462.20289170902, 95547.98905000198 159462.24780184106, 95548.06550522482 159462.29622014388, 95548.13969188088 159462.34804748427, 95548.21145807793 159462.4031777492, 95548.28065687948 159462.4614980631, 95548.34714660558 159462.52288901902, 95548.41079112295 159462.5872249231, 95548.47146012372 159462.65437405187, 95548.52902939213 159462.72419892196, 95548.58338105895 159462.79655657161, 95548.63440384278 159462.87129885334, 95548.68199327785 159462.94827273735, 95548.72605192798 159463.0273206247, 95548.76648958602 159463.10828067016, 95548.80322345858 159463.19098711343, 95548.83617833549 159463.27527061853, 95548.86528674384 159463.36095862067, 95548.89048908609 159463.44787567938, 95548.91173376216 159463.53584383774, 95548.92897727496 159463.62468298685, 95548.94218431957 159463.71421123447, 95548.95188662251 159463.81151022573, 95548.95682172895 159463.909167141, 95548.95697784246 159464.00694855035, 95548.95235458991 159464.1046207261, 95548.94296302229 159464.2019502018, 95548.9288255883 159464.29870433008, 95548.90997608079 159464.3946518389, 95548.88645955584 159464.4895633842, 95548.85833222518 159464.5832120983, 95548.82566132175 159464.67537413197, 95548.78852493908 159464.76582918965, 95548.7470118445 159464.854361056, 95548.70122126705 159464.94075811267, 95548.6512626603 159465.02481384412, 95548.59725544063 159465.1063273314, 95548.53932870191 159465.18510373216, 95548.47762090682 159465.26095474671, 95548.41227955594 159465.33369906776, 95548.34346083515 159465.40316281407, 95548.27132924236 159465.46917994594, 95548.1960571942 159465.53159266216, 95548.11782461399 159465.59025177718, 95548.03681850163 159465.6450170777, 95547.9532324866 159465.6957576578, 95547.86726636514 159465.742352232, 95547.77912562268 159465.78468942485, 95547.68902094265 159465.82266803752, 95547.59716770294 159465.85619728942, 95547.50378546097 159465.88519703542, 95547.409097429 159465.90959795713, 95547.31332994049 159465.9293417289, 95547.21671190913 159465.94438115705, 95547.20453876552 159465.94593431955, 95517.57953876552 159469.63343431955, 95517.56735632104 159469.6349127598, 95517.4699996292 159469.6440178647, 95517.37231427104 159469.64835366668, 95517.27453374452 159469.6479098018, 95517.17689177516 159469.6426873311, 95517.07962175725 159469.6326987378, 95516.98295619599 159469.6179678978, 95516.88712615176 159469.59853002228, 95516.7923606878 159469.5744315737, 95516.69888632269 159469.54573015484, 95516.60692648884 159469.51249437084, 95516.51670099849 159469.47480366545, 95516.42842551829 159469.43274813102, 95516.34231105374 159469.3864282932, 95516.25856344485 159469.33595487062, 95516.17738287413 159469.28144851027, 95516.09896338807 159469.2230394991, 95516.02349243332 159469.16086745256, 95515.95115040865 159469.09508098094, 95515.88211023371 159469.02583733413, 95515.81653693572 159468.95330202568, 95515.754587255 159468.87764843728, 95515.6964092703 159468.79905740422, 95515.64214204489 159468.7177167832, 95515.59191529409 159468.6338210033, 95515.54584907526 159468.5475706012, 95515.50405350082 159468.45917174182, 95515.46662847501 159468.36883572562, 95515.43366345516 159468.27677848338, 95515.40523723776 159468.18322006022, 95515.38141777022 159468.08838408947, 95515.36226198838 159467.99249725824, 95515.34781568043 159467.8957887655, 95515.3381133775 159467.79848977426, 95515.33317827106 159467.70083285897, 95515.33302215755 159467.60305144964, 95515.3376454101 159467.50537927388, 95515.34703697772 159467.4080497982, 95515.36117441171 159467.3112956699, 95515.38002391922 159467.2153481611, 95515.40354044417 159467.12043661578, 95515.43166777483 159467.02678790168, 95515.46433867826 159466.93462586802, 95515.50147506093 159466.84417081033, 95515.5429881555 159466.75563894399, 95515.58877873296 159466.6692418873, 95515.6387373397 159466.58518615586, 95515.69274455938 159466.5036726686, 95515.7506712981 159466.42489626782, 95515.81237909319 159466.34904525327, 95515.87772044407 159466.27630093222, 95515.94653916486 159466.20683718592, 95516.01867075765 159466.14082005405, 95516.0939428058 159466.07840733783, 95516.17217538602 159466.0197482228, 95516.25318149838 159465.96498292228, 95516.3367675134 159465.91424234217, 95516.42273363487 159465.867647768, 95516.51087437733 159465.82531057514, 95516.60097905736 159465.78733196246, 95516.69283229706 159465.75380271056, 95516.78621453904 159465.72480296457, 95516.880902571 159465.70040204286, 95516.97667005952 159465.6806582711, 95517.07328809088 159465.66561884293, 95517.08546123448 159465.66406568044, 95546.71046123448 159461.97656568044, 95546.72264367896 159461.9750872402, 95546.83875296728 159461.9647783267, 95546.9552656286 159461.9612512481))"</span><span class="p">^^</span><span class="nl">&lt;http://www.opengis.net/ont/geosparql#wktLiteral&gt;</span><span class="w">
                </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;https://data.vlaanderen.be/ns/mobiliteit#Zone.type&gt;</span><span class="w">
                </span><span class="nl">&lt;https://private-api.gipod.vlaanderen.be/api/v1/taxonomies/zonetypes/0fb72ef7-6ac9-4a70-b295-a30ea215d250&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;https://private-api.gipod.vlaanderen.be/api/v1/events/9197063&gt;</span><span class="w">
        </span><span class="k">a</span><span class="w">       </span><span class="nl">&lt;https://data.vlaanderen.be/ns/mobiliteit#Evenement&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;https://data.vlaanderen.be/ns/mobiliteit#Inname.heeftGevolg&gt;</span><span class="w">
                </span><span class="nl">&lt;https://private-api.gipod.vlaanderen.be/api/v1/mobility-hindrances/10590495/973&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nl">&lt;https://gipod.vlaanderen.be/ns/gipod#gipodId&gt;</span><span class="w">
                </span><span class="mi">9197063</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;https://private-api.gipod.vlaanderen.be/api/v1/taxonomies/statuses/a411c53e-db33-436a-9bb9-d62d535b661d&gt;</span><span class="w">
        </span><span class="nl">&lt;http://www.w3.org/2004/02/skos/core#prefLabel&gt;</span><span class="w">
                </span><span class="s">"Onbekend"</span><span class="na">@nl-BE</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div> </div> </li> </ul> <p>Publish this turtle:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> POST http://localhost:8080/mobility-hindrances <span class="nt">-H</span> <span class="s2">"Content-Type: application/ttl"</span> <span class="nt">-d</span> <span class="s2">"@mobility-hindrance.ttl"</span>
</code></pre></div></div> <p>with this command.</p> <p>To check out our LDES:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="s2">"http://localhost:8080/mobility-hindrances"</span>
</code></pre></div></div> <h2 id="add-a-second-collection-to-the-ldes-server"> <a href="#add-a-second-collection-to-the-ldes-server" class="anchor-heading" aria-labelledby="add-a-second-collection-to-the-ldes-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add a second collection to the LDES Server </h2> <ul> <li> <p>Next, let’s add a second collection to collect observations:</p> <ul> <li>A collection name “observations”</li> <li>Will process members of type “https://data.vlaanderen.be/ns/mobiliteit#ObservationCollection”</li> <li>Will have a default view, which provides a basic view using a paginated fragmention. This also enables snapshotting.</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> <span class="s1">'POST'</span> <span class="s1">'http://localhost:8080/admin/api/v1/eventstreams'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'accept: text/turtle'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: text/turtle'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'@prefix ldes: &lt;https://w3id.org/ldes#&gt; .
            @prefix example: &lt;http://example.org/&gt; .
            @prefix dcterms: &lt;http://purl.org/dc/terms/&gt; .
            @prefix tree: &lt;https://w3id.org/tree#&gt;.
            @prefix sh:   &lt;http://www.w3.org/ns/shacl#&gt; .
            @prefix server: &lt;http://localhost:8080/&gt; .
            @prefix xsd:  &lt;http://www.w3.org/2001/XMLSchema#&gt; .
            @prefix collection:  &lt;http://localhost:8080/observations/&gt; .
            @prefix prov: &lt;http://www.w3.org/ns/prov#&gt; .


            &lt;/observations&gt; a ldes:EventStream ;
                ldes:timestampPath prov:generatedAtTime ;
                ldes:versionOfPath dcterms:isVersionOf ;
                example:memberType &lt;https://data.vlaanderen.be/ns/mobiliteit#ObservationCollection&gt; ;
                example:hasDefaultView "true"^^xsd:boolean ;
                tree:shape [
                    a sh:NodeShape ;
                ] .

            collection:timebased tree:viewDescription [
                  tree:fragmentationStrategy ([
                    a tree:HierarchicalTimeBasedFragmentation ;
                    tree:maxGranularity "day" ;
                        tree:fragmentationPath prov:generatedAtTime ;
                    ]) ;
                    tree:pageSize "100"^^&lt;http://www.w3.org/2001/XMLSchema#int&gt; ;
                ] .
              
            collection:pagination tree:viewDescription [
                tree:fragmentationStrategy  () ;
                  tree:pageSize "100"^^&lt;http://www.w3.org/2001/XMLSchema#int&gt; ;
              ] .
            '</span>
</code></pre></div> </div> </li> </ul> <h2 id="add-observation-data-to-the-ldes-server"> <a href="#add-observation-data-to-the-ldes-server" class="anchor-heading" aria-labelledby="add-observation-data-to-the-ldes-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add observation data to the LDES Server </h2> <ul> <li> <p>Create a <code class="language-plaintext highlighter-rouge">observation.ttl</code> file with the following content:</p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">dc:</span><span class="w"> </span><span class="nl">&lt;http://purl.org/dc/terms/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">prov:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/ns/prov#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">xsd:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">sosa:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/ns/sosa/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns0:</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/SamplingFeature#SF_SamplingFeatureCollection.&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns1:</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/Observation#OM_Observation.&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns2:</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19103/2005/UnitsOfMeasure#Measure.&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns3:</span><span class="w"> </span><span class="nl">&lt;https://schema.org/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;urn:ngsi-ld:WaterQualityObserved:woq:1/2023-03-12T18:31:17.003Z&gt;</span><span class="w">
</span><span class="nn">dc:</span><span class="n">isVersionOf</span><span class="w"> </span><span class="nl">&lt;urn:ngsi-ld:WaterQualityObserved:woq:1&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="nn">prov:</span><span class="n">generatedAtTime</span><span class="w"> </span><span class="s">"2023-03-12T18:31:17.003Z"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">dateTime</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="nn">sosa:</span><span class="n">hasFeatureOfInterest</span><span class="w"> </span><span class="s">"spt-00035-79"</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="nn">ns0:</span><span class="n">member</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/loc-00019-33&gt;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="nn">sosa:</span><span class="n">madeBySensor</span><span class="w"> </span><span class="nl">&lt;urn:ngsi-v2:cot-imec-be:Device:imec-iow-UR5gEycRuaafxnhvjd9jnU&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">result</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nn">ns2:</span><span class="n">value</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">value</span><span class="w"> </span><span class="mf">2.0</span><span class="mi">43000</span><span class="n">e+1</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">unitCode</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/CEL&gt;</span><span class="w">
    </span><span class="p">]</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">phenomenonTime</span><span class="w"> </span><span class="s">"2023-03-12T18:31:17.003Z"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">datetime</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">observedProperty</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/concept/waterkwaliteitparameter/temperatuur&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">featureOfInterest</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/spt-00035-79&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="k">a</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/Measurement#OM_Measurement&gt;</span><span class="w">
</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="nn">sosa:</span><span class="n">madeBySensor</span><span class="w"> </span><span class="nl">&lt;urn:ngsi-v2:cot-imec-be:Device:imec-iow-UR5gEycRuaafxnhvjd9jnU&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">result</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nn">ns2:</span><span class="n">value</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">value</span><span class="w"> </span><span class="mi">1442</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">unitCode</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/HP&gt;</span><span class="w">
    </span><span class="p">]</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">phenomenonTime</span><span class="w"> </span><span class="s">"2023-03-12T18:31:17.003Z"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">datetime</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">observedProperty</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/concept/observatieparameter/hydrostatische-druk&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">featureOfInterest</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/spt-00035-79&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="k">a</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/Measurement#OM_Measurement&gt;</span><span class="w">
</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="nn">sosa:</span><span class="n">madeBySensor</span><span class="w"> </span><span class="nl">&lt;urn:ngsi-v2:cot-imec-be:Device:imec-iow-UR5gEycRuaafxnhvjd9jnU&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">result</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nn">ns2:</span><span class="n">value</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">value</span><span class="w"> </span><span class="mi">6150</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">unitCode</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/G42&gt;</span><span class="w">
    </span><span class="p">]</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">phenomenonTime</span><span class="w"> </span><span class="s">"2023-03-12T18:31:17.003Z"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">datetime</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">observedProperty</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/concept/waterkwaliteitparameter/conductiviteit&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">featureOfInterest</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/spt-00035-79&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="k">a</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/Measurement#OM_Measurement&gt;</span><span class="w">
</span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="k">a</span><span class="w"> </span><span class="nl">&lt;https://data.vlaanderen.be/ns/mobiliteit#ObservationCollection&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;https://data.vmm.be/id/loc-00019-33&gt;</span><span class="w"> </span><span class="k">a</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/SpatialSamplingFeature#SF_SpatialSamplingFeature&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div> </div> </li> <li> <p>Run the following command to post the <code class="language-plaintext highlighter-rouge">observation.ttl</code> to the LDES Server.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> POST http://localhost:8080/observations <span class="nt">-H</span> <span class="s2">"Content-Type: application/ttl"</span> <span class="nt">-d</span> <span class="s2">"@observation.ttl"</span>
</code></pre></div> </div> </li> </ul> <p>To check out our LDES:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="s2">"http://localhost:8080/observations"</span>
</code></pre></div></div> <p>Because the LDES is configured to provide both pagination fragmentation and time-based fragmentation, it is possible to also crawl on these fragmentations. In this way, you can visit the endpoint of the timebased fragmentation view: http://localhost:8080/observations/timebased, but also the endpoint of the pagination fragmentation view: http://localhost:8080/observations/pagination.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="s2">"http://localhost:8080/observations/timebased?year=2023&amp;month=03&amp;day=12&amp;pageNumber=1"</span>
</code></pre></div></div> <p class="note">Note that you can create more than one view of a LDES, even for simple pagination by specifying a different view URI and page size. Later when we learn about retention policies and different fragmentation strategies, this may make more sense. For now remember that you can create a view before or after you ingest data, You can delete views and re-create them with different options. For this, you will need to use the administration API. This, you can find on http://localhost:8080/v1/swagger-ui/index.html</p> <h2 id="replicating-an-ldes-using-the-ldes-client"> <a href="#replicating-an-ldes-using-the-ldes-client" class="anchor-heading" aria-labelledby="replicating-an-ldes-using-the-ldes-client"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Replicating an LDES using the LDES Client </h2> <ul> <li> <p>Create a <code class="language-plaintext highlighter-rouge">ldio.yml</code> file in the same directory as your <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> with the following content:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">orchestrator</span><span class="pi">:</span>
  <span class="na">pipelines</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">gipod-replicator</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">HTTP</span><span class="nv"> </span><span class="s">polling,</span><span class="nv"> </span><span class="s">OSLO</span><span class="nv"> </span><span class="s">transformation,</span><span class="nv"> </span><span class="s">version</span><span class="nv"> </span><span class="s">creation</span><span class="nv"> </span><span class="s">&amp;</span><span class="nv"> </span><span class="s">HTTP</span><span class="nv"> </span><span class="s">sending."</span>
      <span class="na">input</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">be.vlaanderen.informatievlaanderen.ldes.ldi.client.LdioLdesClient</span>
        <span class="na">config</span><span class="pi">:</span>
          <span class="na">url</span><span class="pi">:</span> <span class="s">https://private-api.gipod.vlaanderen.be/api/v1/ldes/mobility-hindrances</span>
      <span class="na">outputs</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">be.vlaanderen.informatievlaanderen.ldes.ldio.LdioHttpOut</span>
          <span class="na">config</span><span class="pi">:</span>
            <span class="na">endpoint</span><span class="pi">:</span> <span class="s">http://ldio-workbench:8080/mobility-hindrances</span>
            <span class="na">content-type</span><span class="pi">:</span> <span class="s">application/n-quads</span>
</code></pre></div> </div> </li> <li> <p>Execute the following command to start up the LDIO <code class="language-plaintext highlighter-rouge">docker compose up ldio-workbench -d</code></p> </li> <li> <p>Validate your LDES server is being populated by going to <code class="language-plaintext highlighter-rouge">http://localhost:8080/mobility-hindrances/by-page?pageNumber=1</code> and <code class="language-plaintext highlighter-rouge">http://localhost:8080/mobility-hindrances/time-based</code>. These streams should fill up as the LDES Client send members to your server.</p> </li> </ul> <h2 id="tear-down-the-infrastructure-and-remove-the-volumes"> <a href="#tear-down-the-infrastructure-and-remove-the-volumes" class="anchor-heading" aria-labelledby="tear-down-the-infrastructure-and-remove-the-volumes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Tear down the infrastructure and remove the volumes </h2> <ul> <li>Within the working directory, please run <code class="language-plaintext highlighter-rouge">docker rm -f $(docker ps -a -q)</code></li> </ul> </main> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0"></p> <div class="d-flex mt-2"> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.3/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script> </body> </html>
